<!DOCTYPE html>
<html lang="en">

  <head>
<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Socket.IO chat</title>
    

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
		<script src="/socket.io/socket.io.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>


<script>
	
  var socket = io.connect('http://localhost:3000');

socket.on('connect', function(data){
 //socket.emit('msg', document.getElementById('m').value);
 
  socket.emit('getAllRooms');
 
  socket.on('msgFront', function (data) {
   $("#chat").append("<li class='list-group-item'>"+data+"</li>");
    
    });
 
     socket.on('event', function (data) {
   $("#chat").append("<li class='list-group-item'>"+"ROBOT> "+data+"</li>");
    
    });
    
      
    
       socket.on('createdRoom', function (room) {
     $("#rooms").append("<a href='#' class='list-group-item active' onclick=joinRoom('"+room+"')>"+room+"</a>"); 
    });
    
     socket.on('showRooms', function (rooms) {
    alert(rooms);
    });
    
});


function setUsername()
{
 socket.emit('setUsername', document.getElementById('username').value);	 
}


function send()
{
 socket.emit('msg', document.getElementById('m').value);
}


function joinRoom(roomName)
{
	socket.emit('joinRoom', roomName);
}

function createRoom(roomName)
{

	socket.emit('createRoom', document.getElementById('room').value);
}
  
</script>

  </head>


  <body>


<div class="container-fluid">
	
	<br/>
<!-- header-->
<div class="row" id="header">
		  
	<div class="col-md-9">
			
		<div class="input-group">
		  <span class="input-group-addon">Username</span>
		  <input type="text" class="form-control" placeholder="Username" id="username">
		</div>
	</div>

	<div class="col-md-3">
		<button type="button" class="btn btn-primary" onclick="setUsername()">Change it</button>
	</div>


</div>
 <br/><br/><br/>
 
 
<!--body-->
<div class="row" id="body">
	
		<div class="col-md-8">
					<div class="panel panel-primary">
					  <!-- Default panel contents -->
					  <div class="panel-heading">Messages</div>
					  
					  <div class="panel-body">
						<p>Chat:</p>
					  </div>

					  <!-- List group -->
					  <ul class="list-group" id="chat">
						<!--<li class="list-group-item">Me>hello</li>-->
					  </ul>
					</div>
		</div>
		
		
		<div class="col-md-4">
			<div class="panel panel-primary">
					  <!-- Default panel contents -->
					  <div class="panel-heading">Rooms</div>

					  <!-- List rooms -->
					  <div class="list-group" id="rooms">
						  <a href="#" id="MainRoom" class="list-group-item active" onclick="joinRoom('MainRoom')">MainRoom</a>
					  </div>
					  
					</div>
					
					<div class="input-group">
					  <span class="input-group-addon">Create Room</span>
					  <input type="text" class="form-control" placeholder="Room name" id="room"name="room"><button type="button" style="width:480px;"class="btn btn-primary"onclick="createRoom()">Create</button>
					</div>
		
		</div>
		
</div>


<!--footer-->
 <div class="row" id="footer">
<div class="col-md-8">
	


<div class="form-group has-success has-feedback">
    <input type="text" class="form-control" id="m" aria-describedby="inputSuccess4Status">
    <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
    <span id="inputSuccess4Status" class="sr-only">(success)</span>
  </div>


	
	
</div>

<div class="col-md-2">
<button type="button" class="btn btn-success"onclick="send()">Send</button>
</div>


 </div>
	   
		

  
</div>
  

  </body>
</html>
